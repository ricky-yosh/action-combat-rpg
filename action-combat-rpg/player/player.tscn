[gd_scene load_steps=9 format=3 uid="uid://v2khj85gxssc"]

[ext_resource type="Script" uid="uid://dka3nh5un84u4" path="res://player/player.gd" id="1_oul6g"]
[ext_resource type="PackedScene" uid="uid://deipdw0jxd12n" path="res://components/health_component.tscn" id="2_qjkh3"]
[ext_resource type="Script" uid="uid://mtettac2eum5" path="res://player/smooth_camera_arm.gd" id="2_rkbax"]
[ext_resource type="PackedScene" uid="uid://gvp78p80kme3" path="res://player/rig.tscn" id="3_g1dw6"]
[ext_resource type="Script" uid="uid://brtqvtn1afiaf" path="res://player/attack_cast.gd" id="4_yw30f"]
[ext_resource type="PackedScene" uid="uid://d2at053xulnw1" path="res://player/area_attack.tscn" id="6_g6k8r"]
[ext_resource type="PackedScene" uid="uid://bof88r5pkixya" path="res://player/dash.tscn" id="7_boad6"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_kqu6x"]

[node name="Player" type="CharacterBody3D"]
collision_layer = 5
script = ExtResource("1_oul6g")

[node name="HealthComponent" parent="." instance=ExtResource("2_qjkh3")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_kqu6x")

[node name="SpringArm3D" type="SpringArm3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 0.90630776, 0.42261827, 0, -0.42261827, 0.90630776, 0, 0, 0)
spring_length = 4.0
script = ExtResource("2_rkbax")
target = NodePath("../HorizontalPivot/VerticalPivot")

[node name="Camera3D" type="Camera3D" parent="SpringArm3D"]
transform = Transform3D(1, 0, 0, 0, 1.0000001, 0, 0, 0, 1.0000001, 0, 0, 0)

[node name="HorizontalPivot" type="Node3D" parent="."]

[node name="VerticalPivot" type="Node3D" parent="HorizontalPivot"]

[node name="RigPivot" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Rig" parent="RigPivot" instance=ExtResource("3_g1dw6")]

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(0.02624824, 0.8989037, -0.019251425)
bones/0/rotation = Quaternion(0.14098772, 1.1801854e-07, 1.6807045e-08, 0.99001133)
bones/1/rotation = Quaternion(-0.051386967, -5.9783088e-05, 4.6992387e-05, 0.99867886)
bones/2/position = Vector3(1.8910493e-09, 0.14373799, 6.012325e-09)
bones/2/rotation = Quaternion(0.017910747, -0.00090923323, -0.02742998, 0.99946284)
bones/3/position = Vector3(2.5870532e-09, 0.19198926, -3.5064065e-08)
bones/3/rotation = Quaternion(-0.16878225, -0.028141584, 0.061953396, 0.98330176)
bones/4/position = Vector3(-3.643845e-09, 0.087564595, -2.2817055e-09)
bones/4/rotation = Quaternion(0.3434276, -0.024317604, -0.08775351, 0.93475425)
bones/5/rotation = Quaternion(-0.09485658, -2.878517e-09, -6.281979e-08, 0.995491)
bones/6/rotation = Quaternion(-0.18060076, 0.025679057, 0.048353933, 0.9820315)
bones/7/position = Vector3(0.026248217, 0.8989036, -0.01925134)
bones/7/rotation = Quaternion(-0.07823535, -0.74515396, -0.39450192, 0.531971)
bones/8/position = Vector3(0.026248185, 0.89890355, -0.019251399)
bones/8/rotation = Quaternion(-0.0782353, 0.745154, 0.39450192, 0.531971)
bones/9/position = Vector3(0.1573919, 0.9646479, -0.0041937195)
bones/9/rotation = Quaternion(0.96700597, -0.018033754, -0.024916286, 0.25289056)
bones/10/position = Vector3(-5.5980465e-09, 0.2655663, -2.9077984e-09)
bones/10/rotation = Quaternion(5.04069e-08, -0.0073902803, 1.086278e-08, 0.9999727)
bones/11/position = Vector3(-1.9714003e-08, 0.26556626, -4.7012785e-09)
bones/11/rotation = Quaternion(0.4278918, -0.007949944, 0.0026225485, 0.9037912)
bones/12/position = Vector3(1.1459257e-08, 0.22557689, 3.084373e-08)
bones/12/rotation = Quaternion(-7.149339e-09, 0.008678765, 2.3704464e-08, 0.99996233)
bones/13/position = Vector3(-1.306458e-08, 0.2255769, 4.524194e-09)
bones/13/rotation = Quaternion(-0.7095116, 0.022412004, -0.024732264, 0.70390296)
bones/14/position = Vector3(-1.3749932e-08, 0.13987769, 8.0866336e-10)
bones/14/rotation = Quaternion(-0.00010033551, 0.96746147, -0.2530186, -0.0003824706)
bones/15/position = Vector3(-0.10489544, 0.964648, -0.0041936934)
bones/15/rotation = Quaternion(0.99843705, -0.03199164, 0.033057924, 0.031738427)
bones/16/position = Vector3(-6.078414e-09, 0.26414445, -2.3568015e-08)
bones/16/rotation = Quaternion(-1.0904471e-08, -0.0009935938, 5.48282e-09, 0.9999996)
bones/17/position = Vector3(1.008354e-08, 0.26414457, -6.6054575e-09)
bones/17/rotation = Quaternion(0.48919642, -0.001555454, 9.012747e-05, 0.87217236)
bones/18/position = Vector3(8.143248e-09, 0.22409831, -6.385475e-09)
bones/18/rotation = Quaternion(-1.783937e-08, -0.012969396, 8.834022e-09, 0.9999159)
bones/19/position = Vector3(-7.345384e-09, 0.22409824, -5.2407585e-09)
bones/19/rotation = Quaternion(-0.5965971, -0.032806903, -0.0067083896, 0.80184203)
bones/20/position = Vector3(4.414602e-11, 0.13987781, -8.13821e-09)
bones/20/rotation = Quaternion(-9.955438e-05, 0.9674598, -0.25302488, -0.00038308048)
bones/21/position = Vector3(0.05143535, 1.4106112, 0.10054947)
bones/21/rotation = Quaternion(-0.4381886, -0.28473747, -0.40321255, 0.7512224)
bones/22/position = Vector3(0.214486, 1.4640533, 0.04942871)
bones/22/rotation = Quaternion(-0.01874757, -0.10307959, 0.98136884, -0.16105446)
bones/23/position = Vector3(-5.073117e-09, 0.14230968, -5.747133e-08)
bones/23/rotation = Quaternion(3.065841e-08, -0.025925342, 1.3454911e-07, 0.99966395)
bones/24/position = Vector3(-5.713017e-08, 0.14230986, 1.4962659e-08)
bones/24/rotation = Quaternion(0.5176468, -0.020914396, -0.114876196, 0.84758943)
bones/25/position = Vector3(-2.5168745e-08, 0.12590797, 1.4679328e-08)
bones/25/rotation = Quaternion(2.5319625e-07, 0.0012682432, 8.2104e-08, 0.9999993)
bones/26/position = Vector3(2.0000684e-08, 0.1259079, -3.212782e-09)
bones/26/rotation = Quaternion(0.029422393, 0.0010099914, -0.16615663, 0.98565984)
bones/28/rotation = Quaternion(0.70258325, -0.00093978836, -0.001335538, 0.7115997)
bones/29/rotation = Quaternion(0.74112064, 0.002182608, 0.0026537855, 0.6713632)
bones/30/rotation = Quaternion(0.32526952, 0.89005506, 0.2959771, -0.11999685)
bones/31/rotation = Quaternion(0.51488215, -0.11414933, 0.11448254, 0.84187883)
bones/32/rotation = Quaternion(0.5920035, -0.038135104, -0.09069885, 0.799907)
bones/34/position = Vector3(-0.003169373, 0.09872067, 0.014791744)
bones/34/rotation = Quaternion(-0.06747008, 0.71844566, 0.066396445, 0.6891119)
bones/35/rotation = Quaternion(0.58080345, -0.00089191244, -0.001497366, 0.814042)
bones/36/rotation = Quaternion(0.68277705, 0.0017450725, 0.0025661746, 0.73062027)
bones/37/rotation = Quaternion(-0.0042650793, 0.7367137, 0.039478473, 0.67503804)
bones/38/position = Vector3(-0.006229548, 0.09264146, -0.023634413)
bones/38/rotation = Quaternion(-0.109872736, 0.743351, 0.03335051, 0.6589727)
bones/39/rotation = Quaternion(0.6300386, 0.0015198459, 0.0023791695, 0.77655876)
bones/40/rotation = Quaternion(0.65264326, -0.0030815422, -0.0042105936, 0.75764745)
bones/41/rotation = Quaternion(-0.0684175, 0.72410995, 0.033233862, 0.6854775)
bones/42/position = Vector3(-0.0071537, 0.067985795, -0.048198394)
bones/42/rotation = Quaternion(-0.12091298, 0.799109, 0.035892107, 0.5878068)
bones/43/rotation = Quaternion(0.49869275, -0.020270584, -0.025695296, 0.8661607)
bones/44/rotation = Quaternion(0.7153846, 0.035306223, 0.057314385, 0.6954808)
bones/45/rotation = Quaternion(-0.12905948, 0.72893643, -0.02502595, 0.6718401)
bones/46/position = Vector3(0.015191264, 1.407928, 0.0991538)
bones/46/rotation = Quaternion(-0.482702, 0.20643549, 0.42911237, 0.7350141)
bones/47/position = Vector3(-0.14806226, 1.4371394, 0.02976741)
bones/47/rotation = Quaternion(0.035277553, 0.03325674, 0.98514485, 0.1647397)
bones/48/position = Vector3(1.3459527e-09, 0.14342184, 4.387022e-08)
bones/48/rotation = Quaternion(6.727756e-10, 0.09130986, -3.4132157e-09, 0.9958226)
bones/49/position = Vector3(1.7171573e-08, 0.14342204, 2.3472932e-08)
bones/49/rotation = Quaternion(0.49914435, 0.08788301, 0.119087406, 0.8537855)
bones/50/position = Vector3(-9.2817814e-08, 0.12706846, 3.658899e-08)
bones/50/rotation = Quaternion(-1.793927e-07, -0.00449466, -1.3774557e-07, 0.99999)
bones/51/position = Vector3(1.3249583e-07, 0.12706858, 7.1905557e-09)
bones/51/rotation = Quaternion(-0.13695607, -0.0042650267, -0.015853431, 0.9904411)
bones/52/rotation = Quaternion(-0.25630003, 0.8558594, 0.02991857, -0.44824106)
bones/53/rotation = Quaternion(0.694912, 0.107144564, -0.10354832, 0.7034879)
bones/54/rotation = Quaternion(0.7411205, -0.0021826853, -0.0026542416, 0.6713633)
bones/55/rotation = Quaternion(-0.3252694, 0.8900552, 0.2959766, 0.11999792)
bones/56/rotation = Quaternion(0.5148819, 0.11415048, -0.11448296, 0.84187883)
bones/57/rotation = Quaternion(0.5920036, 0.038134698, 0.09069919, 0.79990697)
bones/59/position = Vector3(0.0031693692, 0.098720714, 0.014791884)
bones/59/rotation = Quaternion(0.13877112, -0.7049156, 0.15570952, 0.67793155)
bones/60/rotation = Quaternion(0.579984, 0.04626144, -0.03087554, 0.81272703)
bones/61/rotation = Quaternion(0.68277717, -0.0017470986, -0.0025645252, 0.73062015)
bones/62/rotation = Quaternion(-0.0042653377, -0.73671377, -0.03947876, 0.67503786)
bones/63/position = Vector3(0.006229555, 0.0926414, -0.023634389)
bones/63/rotation = Quaternion(0.10409553, -0.7196071, 0.18626247, 0.6607844)
bones/64/rotation = Quaternion(0.67069286, 0.016339118, -0.018566309, 0.7413228)
bones/65/rotation = Quaternion(0.6924985, 0.0033037008, 0.0040391223, 0.72140044)
bones/66/rotation = Quaternion(-0.06841773, -0.7241101, -0.03323388, 0.6854773)
bones/67/position = Vector3(0.0071536656, 0.06798573, -0.04819838)
bones/67/rotation = Quaternion(0.108364135, -0.76822364, 0.16629079, 0.6086354)
bones/68/rotation = Quaternion(0.6299535, 0.029514799, 0.017750975, 0.7758688)
bones/69/rotation = Quaternion(0.8166777, -0.043953396, -0.05098614, 0.5731545)
bones/70/rotation = Quaternion(-0.12905982, -0.72893655, 0.025025815, 0.67183983)
bones/71/position = Vector3(0.16052747, 1.3491619, 0.025183689)
bones/71/rotation = Quaternion(-0.03663796, 0.55074954, 0.83361375, -0.020510081)
bones/72/position = Vector3(-0.07845403, 1.3314698, 0.015981209)
bones/72/rotation = Quaternion(-0.036637966, 0.55074954, 0.83361375, -0.020510087)

[node name="AnimationTree" parent="RigPivot/Rig" index="1"]
parameters/MoveSpace/blend_position = 0.01805555555555555

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.98799354, -0.14605749, -0.050358783, 0.051583134, -0.61910903, 0.78360915, -0.1456295, 0.77160335, 0.61920947, -0.27208397, 1.0687996, 0.2843675)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.94245994, -0.31653064, -0.10760104, 0.10381572, -0.583028, 0.8057919, -0.3177923, 0.74825597, 0.582341, 0.30969054, 1.0413939, 0.1889089)

[node name="RayAttachment" type="BoneAttachment3D" parent="RigPivot/Rig"]
transform = Transform3D(-0.98799354, -0.14605749, -0.050358783, 0.051583134, -0.61910903, 0.78360915, -0.1456295, 0.77160335, 0.61920947, -0.27208397, 1.0687996, 0.2843675)
bone_name = "DEF-hand.R"
bone_idx = 51
use_external_skeleton = true
external_skeleton = NodePath("../CharacterRig/GameRig/Skeleton3D")

[node name="AttackCast" type="RayCast3D" parent="RigPivot/Rig/RayAttachment"]
unique_name_in_owner = true
transform = Transform3D(-1.1920929e-07, 4.3711392e-08, 1, 1, -4.371139e-08, 1.1920929e-07, 4.3711392e-08, 1, -4.371139e-08, -0.022443324, 0.07855141, -0.043441296)
target_position = Vector3(0, 1, 0)
collision_mask = 8
script = ExtResource("4_yw30f")

[node name="AreaAttack" parent="RigPivot" instance=ExtResource("6_g6k8r")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1)
collision_mask = 8

[node name="Dash" parent="." node_paths=PackedStringArray("player") instance=ExtResource("7_boad6")]
player = NodePath("..")

[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]
[connection signal="heavy_attack" from="RigPivot/Rig" to="." method="_on_rig_heavy_attack"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
